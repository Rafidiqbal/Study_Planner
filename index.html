<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Routine Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#4CAF50" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" />
  <link rel="apple-touch-icon" href="icon-192.png" />
  <link rel="stylesheet" href="style.css" />

  <script>
    // Register service worker
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./service-worker.js")
          .then(() => console.log("Service Worker registered"))
          .catch((err) => console.error("SW registration failed:", err));
      });
    }
  </script>
</head>
<body>
  <h1>ðŸ“š Study Routine Tracker By Rafid Iqbal</h1>

  <!-- Circular Overall Progress -->
  <div id="overall-container">
    <h2>Overall Progress</h2>
    <div class="progress-circle">
      <svg viewBox="0 0 36 36">
        <path class="bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
        <path class="progress" stroke-dasharray="0,100" />
      </svg>
      <span id="progressText">0%</span>
    </div>
  </div>

  <div class="toolbar">
    <button id="addSubjectBtn">âž• Add Subject</button>
  </div>

  <div id="subjects">
    <!-- Example subject with topics and subtopics -->
    <div class="subject">
      <h2>Physics <button>Edit</button></h2>
      <div class="topic" onclick="toggleSubtopics(this)">Mechanics</div>
      <div class="subtopic">Kinematics</div>
      <div class="subtopic">Dynamics</div>
      <div class="subtopic">Work & Energy</div>

      <div class="topic" onclick="toggleSubtopics(this)">Thermodynamics</div>
      <div class="subtopic">Laws of Thermodynamics</div>
      <div class="subtopic">Heat Transfer</div>
    </div>
  </div>

  <button id="darkModeToggle">ðŸŒ™ Dark Mode</button>

  <script src="script.js"></script>

  <script>
    const toggleBtn = document.getElementById("darkModeToggle");

    // Load saved theme
    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark-mode");
    }

    toggleBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");

      // Save theme preference
      if (document.body.classList.contains("dark-mode")) {
        localStorage.setItem("theme", "dark");
      } else {
        localStorage.setItem("theme", "light");
      }
    });

    // Toggle subtopics visibility
    function toggleSubtopics(topicElement) {
      const parent = topicElement.parentElement;
      const subtopics = parent.querySelectorAll(".subtopic");
      subtopics.forEach(st => {
        if (st.style.display === "none" || st.style.display === "") {
          st.style.display = "block";
        } else {
          st.style.display = "none";
        }
      });
    }

    // Example: Update circular progress (0-100)
    function updateOverallProgress(percent) {
      const circle = document.querySelector(".progress-circle .progress");
      const text = document.getElementById("progressText");
      const radius = 15.9155; // same as SVG path
      const dash = (percent / 100) * 2 * Math.PI * radius;
      circle.setAttribute("stroke-dasharray", `${dash}, 100`);
      text.textContent = `${percent}%`;
    }

    // Demo progress
    updateOverallProgress(60);
  </script>
</body>
</html>
